@page "/learnblazor/demoProduct"
<h3 class="text-success">Demo Product</h3>
<p>Favorite Count : @CounterForFavorite</p>
<p>Selected Product : @SelecteProductName</p>
<div class=" pt-2 mt-2">
	<div class="row">

		@foreach(var obj in ProductList)
		{
			<_InvididualComp ProductForComp="@obj"
			OnFavoriteCountChange="FavoriteCountChange"
			OnProductSelected="SelectedProduct">
			</_InvididualComp>

		}
	</div>

</div>
@code {
	public string SelecteProductName{ get; set; } = "";
	public int CounterForFavorite { get; set; } = 0;
	public int Count{ get; set; } = 0;
	List<Product> ProductList = new();
	protected override void OnInitialized()
	{
		ProductList.Add(new()
			{
				Id = 1,
				Name = "Midnight Blaze",
				IsActive = false,
				Price = 10,
				ProductProperties = new List<ProductProp>()
				{
					new ProductProp { Id = 1, Key = "Flavor", Value = "Rose"},
					 new ProductProp { Id = 2, Key = "Size", Value = "20oz"},
					new ProductProp { Id = 3, Key = "Color", Value="Purple" }
				}
			});

		ProductList.Add(new()
			{
				Id = 2,
				Name = "Blossom Lily",
				IsActive = true,
				Price = 15,
				ProductProperties = new List<ProductProp>()
			{
				new ProductProp { Id = 1, Key = "Flavor", Value = "Lily" },
				new ProductProp { Id = 2, Key = "Size", Value = "18oz" },
				new ProductProp {Id = 3,Key = "Color",Value = "White"}
			}
			});
	}

	protected void SelectedProduct(string name)
	{
		SelecteProductName = name;
	}
	protected void FavoriteCountChange(bool isSelected)
	{
		if (isSelected)
		{
			CounterForFavorite++;
		}
		else
		{
			CounterForFavorite--;
		}
	}
	
	}
	

